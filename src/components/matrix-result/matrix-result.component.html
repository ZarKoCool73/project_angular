<!-- Fondo elegante -->
<div class="matrix-bg min-vh-100 d-flex align-items-center">
  <div class="container py-5">
    <div class="row justify-content-center">
      <div class="col-12 col-md-10 col-lg-8">

        <!-- Card ingreso matriz -->
        <div class="card app-card mb-4">
          <div class="card-header app-card-header text-center">
            Procesar Matriz
          </div>

          <div class="card-body">
            <label for="matrix" class="form-label fw-semibold">Ingrese la matriz</label>
            <textarea id="matrix" [(ngModel)]="matrixStr" rows="2"
                      class="form-control app-textarea"
                      placeholder="Ej: [[1,2],[3,4]]"></textarea>

            <button class="btn btn-primary w-100 mt-3 fw-bold" (click)="submitMatrix()">
              Procesar
            </button>

            <div *ngIf="isError" class="alert alert-danger mt-3 text-center">
              {{ errorMsg }}
            </div>
          </div>
        </div>

        <!-- RESULTADOS -->
        <div *ngIf="responseData">

          <!-- Mensaje -->
          <div class="alert alert-success text-center fw-bold fade-in">
            {{ responseData.message }}
          </div>

          <!-- EstadÃ­sticas -->
          <div class="card app-card mb-4">
            <div class="card-header app-card-header bg-secondary text-white text-center">
              EstadÃ­sticas Generales
            </div>

            <div class="card-body">
              <h5 class="section-title">ðŸ“Œ EstadÃ­sticas bÃ¡sicas</h5>
              <table class="table app-table">
                <tbody>
                <tr>
                  <th>MÃ¡ximo</th>
                  <td>{{ responseData.data.statistics.basic.max }}</td>
                </tr>
                <tr>
                  <th>MÃ­nimo</th>
                  <td>{{ responseData.data.statistics.basic.min }}</td>
                </tr>
                <tr>
                  <th>Suma</th>
                  <td>{{ responseData.data.statistics.basic.sum }}</td>
                </tr>
                <tr>
                  <th>Promedio</th>
                  <td>{{ responseData.data.statistics.basic.average }}</td>
                </tr>
                <tr>
                  <th>Cantidad</th>
                  <td>{{ responseData.data.statistics.basic.count }}</td>
                </tr>
                </tbody>
              </table>

              <h5 class="section-title mt-4">ðŸ“Š EstadÃ­sticas avanzadas</h5>
              <table class="table app-table">
                <tbody>
                <tr>
                  <th>Mediana</th>
                  <td>{{ responseData.data.statistics.advanced.median }}</td>
                </tr>
                <tr>
                  <th>Varianza</th>
                  <td>{{ responseData.data.statistics.advanced.variance }}</td>
                </tr>
                <tr>
                  <th>DesviaciÃ³n estÃ¡ndar</th>
                  <td>{{ responseData.data.statistics.advanced.standardDeviation }}</td>
                </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Matrices Q y R -->
          <div class="card app-card mb-4">
            <div class="card-header app-card-header">
              AnÃ¡lisis de Matrices (Q y R)
            </div>

            <div class="card-body">
              <!-- Q -->
              <h5 class="section-title">ðŸ§© Matriz Q</h5>
              <ul class="app-list">
                <li><b>Dimensiones: </b> {{ responseData.data.matrixAnalysis.matrixQ.dimensions }}</li>
                <li>
                  <b>Es cuadrada: </b>
                  <ng-container
                    *ngIf="responseData.data.matrixAnalysis.matrixQ.isSquare || responseData.data.matrixAnalysis.matrixQ.isSquare; else cross">
                    <i class="bi bi-check-circle-fill text-success"></i>
                  </ng-container>
                  <ng-template #cross>
                    <i class="bi bi-x-circle-fill text-danger"></i>
                  </ng-template>
                </li>
                <li><b>Es diagonal: </b>
                  <ng-container
                    *ngIf="responseData.data.matrixAnalysis.matrixQ.isDiagonal || responseData.data.matrixAnalysis.matrixQ.isDiagonal; else cross">
                    <i class="bi bi-check-circle-fill text-success"></i>
                  </ng-container>
                  <ng-template #cross>
                    <i class="bi bi-x-circle-fill text-danger"></i>
                  </ng-template>
                </li>
                <li><b>Triangular superior: </b>
                  <ng-container
                    *ngIf="responseData.data.matrixAnalysis.matrixQ.isUpperTriangular || responseData.data.matrixAnalysis.matrixQ.isUpperTriangular; else cross">
                    <i class="bi bi-check-circle-fill text-success"></i>
                  </ng-container>
                  <ng-template #cross>
                    <i class="bi bi-x-circle-fill text-danger"></i>
                  </ng-template>
                </li>
              </ul>

              <!-- R -->
              <h5 class="section-title mt-4">ðŸ§® Matriz R</h5>
              <ul class="app-list">
                <li><b>Dimensiones:</b> {{ responseData.data.matrixAnalysis.matrixR.dimensions }}</li>
                <li><b>Es cuadrada: </b>
                  <ng-container
                    *ngIf="responseData.data.matrixAnalysis.matrixR.isSquare || responseData.data.matrixAnalysis.matrixR.isSquare; else cross">
                    <i class="bi bi-check-circle-fill text-success"></i>
                  </ng-container>
                  <ng-template #cross>
                    <i class="bi bi-x-circle-fill text-danger"></i>
                  </ng-template>
                </li>
                <li><b>Es diagonal: </b>
                  <ng-container
                    *ngIf="responseData.data.matrixAnalysis.matrixR.isDiagonal || responseData.data.matrixAnalysis.matrixR.isDiagonal; else cross">
                    <i class="bi bi-check-circle-fill text-success"></i>
                  </ng-container>
                  <ng-template #cross>
                    <i class="bi bi-x-circle-fill text-danger"></i>
                  </ng-template>
                </li>
                <li><b>Triangular superior: </b>
                  <ng-container
                    *ngIf="responseData.data.matrixAnalysis.matrixR.isUpperTriangular ||responseData.data.matrixAnalysis.matrixR.isUpperTriangular; else cross">
                    <i class="bi bi-check-circle-fill text-success"></i>
                  </ng-container>
                  <ng-template #cross>
                    <i class="bi bi-x-circle-fill text-danger"></i>
                  </ng-template>
                </li>
              </ul>

              <h5 class="section-title mt-4">âœ” Validaciones</h5>
              <ul class="app-list">
                <li><b>Q es ortogonal: </b>
                  <ng-container
                    *ngIf="responseData.data.matrixAnalysis.validations.qIsOrthogonal || responseData.data.matrixAnalysis.validations.qIsOrthogonal; else cross">
                    <i class="bi bi-check-circle-fill text-success"></i>
                  </ng-container>
                  <ng-template #cross>
                    <i class="bi bi-x-circle-fill text-danger"></i>
                  </ng-template>
                </li>
                <li><b>R es triangular superior: </b>
                  <ng-container
                    *ngIf="responseData.data.matrixAnalysis.validations.rIsUpperTriangular || responseData.data.matrixAnalysis.validations.rIsUpperTriangular; else cross">
                    <i class="bi bi-check-circle-fill text-success"></i>
                  </ng-container>
                  <ng-template #cross>
                    <i class="bi bi-x-circle-fill text-danger"></i>
                  </ng-template>
                </li>
              </ul>
            </div>
          </div>

          <p class="timestamp">
            Ãšltima actualizaciÃ³n: {{ responseData.timestamp | date }}
          </p>

        </div>
      </div>
    </div>
  </div>
</div>
